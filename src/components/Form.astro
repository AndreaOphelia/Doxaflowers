---
import Button from "./Button.astro";
---

<section class="min-h-screen bg-base-100 py-16 px-4">
  <div class=" max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-stretch">
    
    <!-- Venstre side - Billede -->
    <div class="relative h-64 md:h-auto">
      <img 
        src="/public/img/formimg.webp" 
        alt="Floral arrangement" 
        class="w-full h-full object-cover"
      />
    </div>

    <!-- Højre side - Formular -->
    <div class="space-y-8 p-7">
      <div>
        <h1>
          START DIALOGEN OM DIT UNIKKE VÆRK
        </h1>
        <p class="leading-relaxed">
          Doxa Flowers skaber tidskrævende kunsthåndværk på bestilling.
          Fortæl mig om din idé, dit projekt eller din begivenhed, så
          vender jeg tilbage med et oplæg.
        </p>
      </div>

      <form class="space-y-6" id="contactForm">
        <!-- Tekst Sektion -->
        <div>
          <label class="block text-sm tracking-widest mb-3">
            ØNSKET FORMAT*
          </label>
          <div class="space-y-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input 
                type="radio" 
                name="format" 
                value="buketter" 
                class="radio radio-sm"
                checked
              />
              <span class="font-light">Buketter og installationer</span>
            </label>
            <label class="flex items-center gap-3 cursor-pointer">
              <input 
                type="radio" 
                name="format" 
                value="workshop" 
                class="radio radio-sm"
              />
              <span class="text-primary-content font-light">Workshop tilmelding</span>
            </label>
          </div>
        </div>

        <!-- Navn Felt -->
        <div>
          <label class="block text-sm tracking-widest mb-2">
            DIT FULDE NAVN*
          </label>
          <input 
            type="text" 
            name="name"
            placeholder="Indtast dit fulde navn"
            required
            class="w-full bg-transparent py-2" 
          />
        </div>

        <!-- Email Felt -->
        <div>
          <label class="block text-sm tracking-widest mb-2">
            EMAIL*
          </label>
          <input 
            type="email" 
            placeholder="Indtast din email"
            name="email"
            required
            class="w-full bg-transparent py-2"
          />
        </div>

        <!-- Telefonnummer Felt -->
        <div>
          <label class="block text-sm tracking-widest mb-2">
            TELEFONNUMMER*
          </label>
          <input 
            type="tel" 
            placeholder="Indtast dit telefonnummer"
            name="phone"
            required
            class="w-full py-2 bg-transparent"
          />
        </div>

        <!-- Workshop Dato Vælger (skjult som standard) -->
        <div id="workshopFields" class="hidden space-y-6">
          <div>
            <label class="block text-sm tracking-widest mb-2">
              VÆLG DATO*
            </label>
            <div class="relative">
              <input 
                type="text" 
                id="dateInput"
                name="date"
                readonly
                placeholder="Klik for at vælge dato"
                class="w-full bg-transparent py-2 cursor-pointer"
              />
              <div id="calendarContainer" class="hidden absolute top-full left-0 mt-2 z-50 bg-base-100 p-4">
                <calendar-date id="workshopCalendar"></calendar-date>
              </div>
            </div>
          </div>
        </div>

        <!-- Buket Felter -->
        <div id="bouquetFields" class="space-y-6">
          <!-- Dropdowns -->
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm tracking-widest mb-2">
                ØNSKET PRISRAMME
              </label>
              <select name="priceRange" class="w-full bg-transparent py-2">
                <option value="">Vælg</option>
                <option value="under-1000">Under 1.000 kr</option>
                <option value="1000-3000">1.000-3.000 kr</option>
                <option value="3000-5000">3.000-5.000 kr</option>
                <option value="over-5000">Over 5.000 kr</option>
              </select>
            </div>

            <div>
              <label class="block text-sm tracking-widest mb-2">
                TYPE VÆRK
              </label>
              <select name="workType" class="w-full bg-transparent py-2">
                <option value="">Vælg</option>
                <option value="buket">Buket</option>
                <option value="installation">Installation</option>
                <option value="dekoration">Dekoration</option>
                <option value="andet">Andet</option>
              </select>
            </div>
          </div>

          <!-- Beskriv Din Vision -->
          <div>
            <label class="block text-sm tracking-widest mb-2">
              BESKRIV DIN VISION
            </label>
            <textarea 
              name="message"
              placeholder="Fortæl mig om dine ønsker og idéer..."
              rows="6"
              class="w-full py-2 resize-none border bg-transparent"
            ></textarea>
          </div>
        </div>

        <!-- Send Knappen -->
        <Button size="small">Start dialog</Button>
      </form>
    </div>

  </div>
</section>

<script>  
  // Form toggle logik
  const radioButtons = document.querySelectorAll('input[name="format"]');
  const workshopFields = document.getElementById('workshopFields');
  const bouquetFields = document.getElementById('bouquetFields');

  // Toggle felter baseret på valgt format (workshop eller blomster)
  function toggleFields() {
    const selectedFormat = document.querySelector('input[name="format"]:checked') as HTMLInputElement;
    
    if (selectedFormat?.value === 'workshop') {
      workshopFields?.classList.remove('hidden');
      bouquetFields?.classList.add('hidden');
    } else {
      workshopFields?.classList.add('hidden');
      bouquetFields?.classList.remove('hidden');
    }
  }

  // Tilføj event listeners til radio knapper
  radioButtons.forEach(radio => {
    radio.addEventListener('change', toggleFields);
  });

  // Initialiser formular ved indlæsning
  toggleFields();
</script>