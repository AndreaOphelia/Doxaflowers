---
import { Image } from "astro:assets";
import kontaktImage from "../assets/images/formimg.webp";
import Button from "./Button.astro";
import Heading from "./Heading.astro";
---

<section class="text-primary-content min-h-screen bg-base-100 py-16 px-4 pt-36">
  <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-stretch">
    {/* Venstre side - billede */}
    <div
      class="relative flex items-center justify-center h-full md:h-auto md:min-h-[480px]"
    >
      <Image
        src={kontaktImage}
        alt="Doxa flowers buket med rød baggrund"
        class="w-full h-full max-h-[980px] aspect-square object-cover"
      />
    </div>

    {/* Højre side - formular */}
    <div
      class="font-[WorkSans] space-y-8 p-7 md:p-0"
      x-data="{ format: '${defaultFormat}', showSuccess: false }"
    >
      <div>
        <Heading htmlheading="h1" size="large">
          START DIALOGEN OM DIT UNIKKE VÆRK
        </Heading>
        <p class="mt-4">
          Doxa Flowers skaber tidskrævende kunsthåndværk på bestilling. Vi tilbyder også workshops hvor du selv kan lære at skabe. Fortæl mig om din idé, dit projekt, din begivenhed, eller tilmeld dig en workshop, så vender jeg tilbage med et oplæg.
        </p>
      </div>

      {/* Feedback besked */}
      <div
        x-show="showSuccess"
        x-transition
        class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 relative"
        role="alert"
      >
        <strong class="font-bold">Tak for din besked!</strong>
        <span class="block sm:inline"> Jeg vender tilbage hurtigst muligt.</span>
      </div>

      <form
        class="space-y-6"
        @submit.prevent="
          showSuccess = true; 
          $event.target.reset(); 
          format = '${defaultFormat}';
          setTimeout(() => showSuccess = false, 10000)
        "
      >
        {/* Tekst Sektion */}
        <div>
          <label class="block text-sm tracking-widest mb-3">
            ØNSKET FORMAT*
          </label>
          <div class="space-y-2">
            <label class="flex items-center gap-3 cursor-pointer">
              <input
                type="radio"
                name="format"
                value="buketter"
                class="radio radio-sm"
                x-model="format"
              />
              <span class="font-[WorkSans]">Buketter og installationer</span>
            </label>
            <label class="flex items-center gap-3 cursor-pointer">
              <input
                type="radio"
                name="format"
                value="workshop"
                class="radio radio-sm"
                x-model="format"
              />
              <span class="font-[WorkSans]">Workshop tilmelding</span>
            </label>
          </div>
        </div>

        {/* Navn Felt */}
        <div>
          <label class="block text-sm tracking-widest mb-2">
            DIT FULDE NAVN*
          </label>
          <input
            type="text"
            name="name"
            placeholder="Indtast dit fulde navn"
            required
            class="border-accent-100 italic w-full bg-transparent py-2"
          />
        </div>

        {/* Email Felt */}
        <div>
          <label class="block text-sm tracking-widest mb-2"> EMAIL* </label>
          <input
            type="email"
            placeholder="Indtast din email"
            name="email"
            required
            class="border-accent-100 italic w-full bg-transparent py-2"
          />
        </div>

        {/* Telefonnummer Felt */}
        <div>
          <label class="block text-sm tracking-widest mb-2">
            TELEFONNUMMER*
          </label>
          <input
            type="tel"
            placeholder="Indtast dit telefonnummer"
            name="phone"
            required
            class="border-accent-100 italic w-full py-2 bg-transparent"
          />
        </div>

        {/* Workshop Dato Dropdown */}
        <div
          id="workshopFields"
          class="space-y-6"
          x-show="format === 'workshop'"
        >
          <div>
            <label class="block text-sm tracking-widest mb-2">
              VÆLG DATO*
            </label>
            <select
              name="date"
              class="border-accent-content-100 w-full bg-transparent py-2"
            >
              <option value="">Vælg en dato</option>
              <option value="2025-01-15">15. januar 2026</option>
              <option value="2025-02-12">12. februar 2026</option>
              <option value="2025-03-19">19. marts 2026</option>
              <option value="2025-04-16">16. april 2026</option>
              <option value="2025-05-14">14. maj 2026</option>
            </select>
          </div>
        </div>

        {/* Buket Felter */}
        <div
          id="bouquetFields"
          class="space-y-6"
          x-show="format === 'buketter'"
        >
          {/* Dropdowns */}
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm tracking-widest mb-2">
                ØNSKET PRISRAMME
              </label>
              <select
                name="priceRange"
                class="border-accent-100 w-full bg-transparent py-2 font-[WorkSans]"
              >
                <option value="">Vælg</option>
                <option value="under-1000">Under 1.000 kr</option>
                <option value="1000-3000">1.000-3.000 kr</option>
                <option value="3000-5000">3.000-5.000 kr</option>
                <option value="over-5000">Over 5.000 kr</option>
              </select>
            </div>

            <div>
              <label class="block text-sm tracking-widest mb-2">
                TYPE VÆRK
              </label>
              <select
                name="workType"
                class="border-accent-100 w-full bg-transparent py-2 font-[WorkSans]"
              >
                <option value="">Vælg</option>
                <option value="buket">Buket</option>
                <option value="installation">Installation</option>
                <option value="dekoration">Dekoration</option>
                <option value="andet">Andet</option>
              </select>
            </div>
          </div>

          {/* Beskriv Din Vision */}
          <div>
            <label class="block text-sm tracking-widest mb-2">
              BESKRIV DIN VISION
            </label>
            <textarea
              name="message"
              placeholder="Fortæl mig om dine ønsker og idéer..."
              rows="6"
              class="border-accent-100 italic w-full py-2 resize-none bg-transparent"
            ></textarea>
          </div>
        </div>

        {/* Send Knappen */}
        <Button size="small">Start dialog</Button>
      </form>
    </div>
  </div>
</section>
