---
import MainLayout from "../layouts/MainLayout.astro";
import Button from "../components/Button.astro";
import Link from "../components/Link.astro";
import { Image } from "astro:assets";
import hero1 from "../assets/images/stoevethvidblaa2.webp";
import hero2 from "../assets/images/stoevethvidblaa1.webp";
import hero3 from "../assets/images/buketvase3.webp";
import hero4 from "../assets/images/vasetaburet2.webp";
import hero5 from "../assets/images/vasetaburet3.webp";
import hero6 from "../assets/images/japansk1.webp";
import hero7 from "../assets/images/buketseriemulti2.webp";
import hero8 from "../assets/images/buketseriemulti3.webp";
import hero9 from "../assets/images/moerkbuket1.webp";
import hero10 from "../assets/images/scrollytelling img 1.webp";
import buket1 from "../assets/images/buketvase3.webp";
import blad1 from "../assets/images/maleblade.webp";
import blad2 from "../assets/images/maleblade2.webp";
import Testimonial from "../components/Testimonial.astro";
import Heading from "../components/Heading.astro";
import maler from "../assets/images/maler.webp";
import vindue from "../assets/images/vindue.webp";
import vaerksted1 from "../assets/images/vaerksted1.webp";
---

<MainLayout title="Doxa Flowers">
  <section
    class="py-16 md:py-24 relative h-screen overflow-hidden -mx-8 md:-mx-8 lg:-mx-10"
  >
    <div
      class="absolute inset-0 grid grid-cols-1 lg:grid-cols-2 gap-0 lg:gap-2 z-0"
    >
      <!-- Venstre side -->
      <div class="relative w-full h-full">
        <Image
          src={hero1}
          alt="blomster"
          class="fadeLeft absolute inset-0 w-full h-full object-cover opacity-100 transition-opacity duration-1000"
        />
        <Image
          src={hero8}
          alt="blomster"
          class="fadeLeft absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
        <Image
          src={hero9}
          alt="blomster"
          class="fadeLeft absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
        <Image
          src={hero4}
          alt="blomster"
          class="fadeLeft absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
      </div>

      <!-- Højre side  -->
      <div class="relative w-full h-full hidden lg:block">
        <Image
          src={hero2}
          alt="blomster"
          class="fadeRight absolute inset-0 w-full h-full object-cover opacity-100 transition-opacity duration-1000"
        />
        <Image
          src={hero7}
          alt="blomster"
          class="fadeRight absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
        <Image
          src={hero10}
          alt="blomster"
          class="fadeRight absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
        <Image
          src={hero3}
          alt="blomster"
          class="fadeRight absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-1000"
        />
      </div>
    </div>

    <!-- TEKST med boks -->
    <div
      class="absolute left-6 md:left-10 bottom-10 max-w-sm md:max-w-lg z-10
         flex flex-col gap-4
         bg-white/70 backdrop-blur-md p-6 text-primary-content"
    >
      <Heading htmlheading="h1" size="large">
        Håndlavede blomster af papir
      </Heading>

      <p>
        Jeg skaber varige, unikke blomsterarrangementer i papir, tilpasset din
        historie, dit rum eller din begivenhed. Slow craftsmanship, hvor hvert
        blad er farvet og formet i hånden.
      </p>

      <a href="/kontakt">
        <Button variant="primary" size="small"> Bestil dit værk </Button>
      </a>
    </div>
  </section>

  <section class="py-16 md:py-24 md:flex items-center justify-between gap-8">
    <!-- Tekst -->
    <div
      class="flex flex-col gap-6 w-full md:w-2/3 mb-8 md:mb-0 text-primary-content"
    >
      <Heading htmlheading="h2" size="large">
        Doxa buketten er altid i forandring
      </Heading>

      <p>
        Hver en blomst drives frem af kærlighed til papiret, former og farver.
        Jeg lader mig inspirere af naturen men fortolker frit og skaber dermed
        doxa blomster som alle er unikke i deres farve og udtryk. Alle mine
        blomster er lavet af FSC/miljøvenligt papir. Udover de færdigfarvede
        papirer, så indfarver jeg også selv med naturens egne elementer.
      </p>
      <a href="/koncept">
        <Button variant="primary" size="small"> Udforsk konceptet </Button>
      </a>
    </div>

    <!-- Billede -->
    <div class="md:w-3/4 flex justify-end">
      <Image
        src={buket1}
        alt="billede af blomster"
        class="w-full md:w-4/5 object-cover"
      />
    </div>
  </section>

  <section class="md:flex flex-row gap-8 text-primary-content">
    <div class="flex flex-col gap-4 mb-8">
      <Image
        src={blad2}
        alt="billede af blomster"
        class="max-h-[500px] object-cover w-full hidden md:block"
      />
      <div>
        <Heading htmlheading="h2" size="large"> Hvert et lille blad.. </Heading>
        <p class="mt-4">
          Alle blade håndklippes, og langsomt spirer en ny blomst frem. Ikke
          nogen form for cutter eller andre maskiner bliver brugt, men masser af
          kærlighed, en saks og mange timer
        </p>
      </div>
    </div>
    <div class="flex flex-col mb-8 gap-4">
      <Image
        src={maler}
        alt="billede af blomster"
        class="max-h-[500px] object-cover w-full hidden md:block"
      />
      <div class="gap-8">
        <Heading htmlheading="h2" size="large"> Farver af naturen </Heading>
        <p class="mt-4">
          Udover de færdigfarvede papirer, indfarver og tilføres nye dimensioner
          med farver fra naturens egne elementer. Farver fra te, kaffe, frugt og
          grøntsager fører til nye og unikke farver.
        </p>
      </div>
    </div>

    <div class="flex flex-col-reverse md:flex-col gap-4">
      <Image
        src={vindue}
        alt="billede af blomster"
        class="max-h-[500px] object-cover w-full"
      />

      <div class="flex flex-col">
        <Heading htmlheading="h2" size="large"> Unikt finish </Heading>
        <p class="mt-4 mb-4">
          Efter indfarvningen efterbehandler jeg med tørpasteller og eller
          akvarel. Farveskalaen kan derfor være den samme, men vil naturligvis
          variere fra buket til buket. Jeg indfarver kun materialer til en buket
          af gangen.
        </p>
      </div>
    </div>
  </section>

  <section class="mb-34 mt-16 text-primary-content">
    <Testimonial
      testimonials={[
        {
          text: "Kære Pernille, Den flotte og smukke kunstbuket pryder mit hjem og giver mig et smil på læberne hver morgen, når jeg ser hvor smukt den pynter i mit vindue. Den er med til at skabe glæde i hjemmet. TAK.",
          author: "– Gork Jensen.",
        },
        {
          text: "Tak for den fantastiske buket, der nu pryder psykologklinikken på Frederiksberg. De unikke farver passer perfekt ind i PsykologNords univers, og vi glæder os til at buketterne også kommer i resten af vores klinikker.",
          author: "–Katrine Breum Larsen, PsykologNord ",
        },
        {
          text: "Fra første gang jeg så Doxaflowers kunstbuketter på IG, vidste jeg bare, at jeg måtte eje en buket. Nu er min bestilte Doxaflowers buket så lige ankommet. Smukt og sikkert indpakket, og jeg er meget tilfreds, for den er virkelig virkelig smuk! Jeg er ret imponeret over de mange forskellige blomster typer, de skønne nuancer/farvesammensætninger, som Doxaflowers med sikker hånd kreerer.",
          author: "– Mayanna J.Riis, Brønshøj",
        },
      ]}
    />
  </section>

  <section
    class="md:flex md:justify-between items-center mb-40 gap-8 text-primary-content"
  >
    <!-- Tekst -->
    <div class="flex flex-col gap-8 mb-8 lg:mb-0 lg:w-1/2">
      <Heading htmlheading="h2" size="large">
        Sådan Skaber Vi Dit Værk
      </Heading>

      <p>
        Trin 1: Idé & Dialog Udfyld kontaktformularen, eller kontakt mig og
        fortæl om dine ønsker.
      </p>

      <p>
        Trin 2: Design & Håndværk Grundet den 100% håndlavede proces er
        leveringstiden typisk 4-8 uger efter design og pris er godkendt. Jeg
        skaber dit værk i ro, ikke i hast.
      </p>

      <p>
        Trin 3: Overlevering Dit kunstværk er klar til levering eller
        afhentning.
      </p>
      <a href="/services">
        <Button variant="primary" size="small">
          Læs mere om mine services
        </Button>
      </a>
    </div>

    <!-- Billede -->
    <div class="lg: flex md:justify-end">
      <Image src={hero5} alt="billede af blomster" class="md:w-3/4" />
    </div>
  </section>

  <!-- POPUP OVERLAY -->
  <div
    id="popup-overlay"
    class="fixed inset-0 bg-primary-content/40 backdrop-blur-sm flex items-center justify-center z-50 hidden"
  >
    <!-- POPUP BOX -->
    <div
      class="relative bg-base-100 text-primary-content max-w-3xl h-auto mx-4 md:h-[420px] overflow-hidden flex flex-col md:flex-row"
    >
      <!-- X-KNAP -->
      <button
        id="popup-close-x"
        class="cursor-pointer absolute top-3 right-3 text-gray-500 hover:text-black text-2xl leading-none"
        aria-label="Luk popup"
      >
        ×
      </button>

      <!-- Billede venstre side -->
      <div class="md:w-1/2 w-full h-48 md:h-full">
        <Image
          src={vaerksted1}
          alt="Popup billede"
          class="w-full h-full object-cover"
        />
      </div>

      <!-- Tekst højre side -->
      <div class="md:w-1/2 w-full p-6 mt-4 flex flex-col justify-between gap-4 text-primary-content">
        <div>
          <h2 class="text-xl font-semibold mb-2">Velkommen til Doxa Flowers</h2>
          <p class="">Hold øje med kommende workshops og nye kollektioner!</p>
          <br />
          <p>
            På Doxa Flowers' workshops får du lov til selv at fordybe dig i
            håndværket bag de unikke papirblomster. Du lærer teknikkerne,
            farverne og formen – trin for trin – og går hjem med dine egne
            håndlavede blomster og en kreativ ro i kroppen.
          </p>
        </div>

        <div class="flex gap-3 mt-4">
          <a href="/workshop">
            <Button variant="primary" size="small">Læs mere om workshops</Button>
          </a>
        </div>
      </div>
    </div>
  </div>
</MainLayout>

<script>
  // Image slider functionality
  const leftImages = document.querySelectorAll(".fadeLeft");
  const rightImages = document.querySelectorAll(".fadeRight");
  let index = 0;

  function updateSlider() {
    // Update images
    leftImages.forEach((img, i) => {
      img.style.opacity = i === index ? "1" : "0";
    });
    rightImages.forEach((img, i) => {
      img.style.opacity = i === index ? "1" : "0";
    });

    index = (index + 1) % leftImages.length;
  }

  // Start slider interval
  setInterval(updateSlider, 4000);

  // Popup functionality - using sessionStorage instead of localStorage
  // This will show popup once per browser session
  window.addEventListener("DOMContentLoaded", () => {
    const popup = document.getElementById("popup-overlay");
    const closeX = document.getElementById("popup-close-x");

    if (!popup || !closeX) {
      console.warn("Popup elements not found");
      return;
    }

    // Check if popup has been seen this session
    const hasSeenPopup = sessionStorage.getItem("doxaPopupSeen");

    if (!hasSeenPopup) {
      setTimeout(() => {
        popup.classList.remove("hidden");
      }, 2500);
    }

    function closePopup() {
      popup.classList.add("hidden");
      sessionStorage.setItem("doxaPopupSeen", "true");
    }

    // Close via X button
    closeX.addEventListener("click", closePopup);

    // Close when clicking outside popup
    popup.addEventListener("click", (e) => {
      if (e.target === popup) closePopup();
    });
  });
</script>